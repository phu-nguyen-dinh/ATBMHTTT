--BẢNG DONVI
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('CNTT', 'Khoa Công nghệ thông tin', 'Khoa', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('HOA', 'Khoa Hóa học', 'Khoa', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('TOAN', 'Khoa Toán học', 'Khoa', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('PDT', 'Phòng Đào tạo', 'Phòng', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('PTV', 'Phòng Tài vụ', 'Phòng', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('VLY', 'Khoa Vật lý', 'Khoa', NULL);
INSERT INTO DONVI (MADV, TENDV, LOAIDV, TRGDV) VALUES ('PQTTB', 'Phòng Quản trị thiết bị', 'Phòng', NULL);

--BẢNG NHANVIEN
INSERT INTO NHANVIEN VALUES ('NV01', 'Nguyen Van A', 'Nam', TO_DATE('1980-05-20','YYYY-MM-DD'), 12000000, 1000000, '0912345678', 'Trưởng khoa', 'CNTT');
INSERT INTO NHANVIEN VALUES ('NV02', 'Tran Thi B', 'Nữ', TO_DATE('1982-11-15','YYYY-MM-DD'), 11000000, 900000, '0987654321', 'Phó khoa', 'CNTT');
INSERT INTO NHANVIEN VALUES ('NV03', 'Le Van C', 'Nam', TO_DATE('1975-09-10','YYYY-MM-DD'), 15000000, 1500000, '0934567890', 'Trưởng phòng', 'PDT');
INSERT INTO NHANVIEN VALUES ('NV04', 'Pham Thi D', 'Nữ', TO_DATE('1990-01-01','YYYY-MM-DD'), 10000000, 700000, '0923456789', 'Nhân viên', 'PDT');
INSERT INTO NHANVIEN VALUES ('NV05', 'Dang Van E', 'Nam', TO_DATE('1985-07-25','YYYY-MM-DD'), 13000000, 1200000, '0909123456', 'Trưởng khoa', 'HOA');
INSERT INTO NHANVIEN VALUES ('NV06', 'Bui Thi F', 'Nữ', TO_DATE('1979-03-18','YYYY-MM-DD'), 14000000, 1100000, '0945678901', 'Trưởng phòng', 'PTV');
INSERT INTO NHANVIEN VALUES ('NV07', 'Do Van G', 'Nam', TO_DATE('1983-08-08','YYYY-MM-DD'), 12500000, 1000000, '0911222333', 'Giảng viên', 'TOAN');
INSERT INTO NHANVIEN VALUES ('NV08', 'Ha Thi Thu H', 'Nữ', TO_DATE('1989-12-08','YYYY-MM-DD'), 15000000, 2000000, '0977150880', 'Trưởng khoa', 'VLY');

--UPDATE BẢNG DONVI
UPDATE DONVI SET TRGDV = 'NV01' WHERE MADV = 'CNTT';
UPDATE DONVI SET TRGDV = 'NV05' WHERE MADV = 'HOA';
UPDATE DONVI SET TRGDV = 'NV06' WHERE MADV = 'PTV';
UPDATE DONVI SET TRGDV = 'NV03' WHERE MADV = 'PDT';
UPDATE DONVI SET TRGDV = 'NV08' WHERE MADV = 'VLY';

--BẢNG SINHVIEN
INSERT INTO SINHVIEN VALUES ('SV001', 'Nguyen Thi Mai', 'Nữ', TO_DATE('2003-04-15','YYYY-MM-DD'), 'Hà Nội', '0911111111', 'CNTT', 'Đang học');
INSERT INTO SINHVIEN VALUES ('SV002', 'Tran Van Binh', 'Nam', TO_DATE('2002-12-20','YYYY-MM-DD'), 'Hải Phòng', '0922222222', 'HOA', 'Đang học');
INSERT INTO SINHVIEN VALUES ('SV003', 'Le Thi Cam', 'Nữ', TO_DATE('2001-06-10','YYYY-MM-DD'), 'Đà Nẵng', '0933333333', 'CNTT', 'Nghỉ học');
INSERT INTO SINHVIEN VALUES ('SV004', 'Pham Van Duy', 'Nam', TO_DATE('2003-01-05','YYYY-MM-DD'), 'TP.HCM', '0944444444', 'TOAN', 'Đang học');
INSERT INTO SINHVIEN VALUES ('SV005', 'Do Thi Em', 'Nữ', TO_DATE('2000-11-11','YYYY-MM-DD'), 'Cần Thơ', '0955555555', 'CNTT', 'Bảo lưu');
INSERT INTO SINHVIEN VALUES ('SV006', 'Hoang Van Hoa', 'Nam', TO_DATE('2003-03-30','YYYY-MM-DD'), 'Bắc Giang', '0966666666', 'HOA', 'Đang học');
INSERT INTO SINHVIEN VALUES ('SV007', 'Ngo Thi Lan', 'Nữ', TO_DATE('2002-09-09','YYYY-MM-DD'), 'Quảng Ninh', '0977777777', 'VLY', 'Đang học');

--BẢNG HOCPHAN
INSERT INTO HOCPHAN VALUES ('HP001', 'Cấu trúc dữ liệu', 3, 30, 15, 'CNTT');
INSERT INTO HOCPHAN VALUES ('HP002', 'Giải tích 1', 4, 45, 15, 'TOAN');
INSERT INTO HOCPHAN VALUES ('HP003', 'Lý thuyết hóa học', 3, 35, 20, 'HOA');
INSERT INTO HOCPHAN VALUES ('HP004', 'Lập trình Java', 3, 30, 20, 'CNTT');
INSERT INTO HOCPHAN VALUES ('HP005', 'Vật lý đại cương', 3, 40, 15, 'VLY');
INSERT INTO HOCPHAN VALUES ('HP006', 'Cơ sở dữ liệu', 3, 30, 15, 'CNTT');
INSERT INTO HOCPHAN VALUES ('HP007', 'Xác suất thống kê', 3, 30, 10, 'TOAN');

--BẢNG MOMON
INSERT INTO MOMON VALUES ('MM001', 'HP001', 'NV01', 1, 2024);
INSERT INTO MOMON VALUES ('MM002', 'HP002', 'NV07', 1, 2024);
INSERT INTO MOMON VALUES ('MM003', 'HP003', 'NV05', 2, 2024);
INSERT INTO MOMON VALUES ('MM004', 'HP004', 'NV02', 2, 2024);
INSERT INTO MOMON VALUES ('MM005', 'HP005', 'NV08', 1, 2024);
INSERT INTO MOMON VALUES ('MM006', 'HP006', 'NV02', 3, 2024);
INSERT INTO MOMON VALUES ('MM007', 'HP007', 'NV07', 2, 2024);

--BẢNG DANGKY
INSERT INTO DANGKY VALUES ('SV001', 'MM001', 8.5, 9.0, 8.0, 8.5);
INSERT INTO DANGKY VALUES ('SV001', 'MM004', 7.5, 8.0, 7.0, 7.5);
INSERT INTO DANGKY VALUES ('SV002', 'MM003', 6.0, 6.5, 7.0, 6.5);
INSERT INTO DANGKY VALUES ('SV004', 'MM002', 9.0, 9.5, 9.0, 9.2);
INSERT INTO DANGKY VALUES ('SV005', 'MM006', 7.0, 8.0, 7.5, 7.5);
INSERT INTO DANGKY VALUES ('SV006', 'MM005', 6.5, 7.0, 6.0, 6.5);
INSERT INTO DANGKY VALUES ('SV007', 'MM007', 8.0, 7.5, 7.0, 7.5);

--TẠO USERS
--SINH VIÊN
CREATE USER SV001 IDENTIFIED BY SV001_123456;
CREATE USER SV002 IDENTIFIED BY SV002_123456;
CREATE USER SV003 IDENTIFIED BY SV003_123456;
CREATE USER SV004 IDENTIFIED BY SV004_123456;
CREATE USER SV005 IDENTIFIED BY SV005_123456;
CREATE USER SV006 IDENTIFIED BY SV006_123456;
CREATE USER SV007 IDENTIFIED BY SV007_123456;

BEGIN
  FOR i IN 1..7 LOOP
    EXECUTE IMMEDIATE 'GRANT CONNECT TO SV00' || i;
    EXECUTE IMMEDIATE 'GRANT SELECT ON SYS.SINHVIEN TO SV00' || i;
    EXECUTE IMMEDIATE 'GRANT SELECT ON SYS.MOMON TO SV00' || i;
    EXECUTE IMMEDIATE 'GRANT SELECT ON SYS.HOCPHAN TO SV00' || i;
    EXECUTE IMMEDIATE 'GRANT SELECT, INSERT, UPDATE ON SYS.DANGKY TO SV00' || i;
  END LOOP;
END;
/

--NHÂN VIÊN
--GIẢNG VIÊN THƯỜNG
CREATE USER GV007 IDENTIFIED BY GV007_123456;

--TRƯỞNG KHOA
CREATE USER TK001 IDENTIFIED BY TK001_123456;
CREATE USER PK002 IDENTIFIED BY PK002_123456;
CREATE USER TK005 IDENTIFIED BY TK005_123456;
CREATE USER TK008 IDENTIFIED BY TK008_123456;

--CẤP QUYỀN CHO GV THƯỜNG
GRANT CONNECT TO GV007;
GRANT SELECT ON SYS.MOMON TO GV007;
GRANT SELECT, UPDATE ON SYS.DANGKY TO GV007;
GRANT SELECT ON SYS.HOCPHAN TO GV007;
GRANT SELECT ON SYS.SINHVIEN TO GV007;

--CẤP QUYỀN CHO TRƯỞNG KHOA
GRANT CONNECT TO TK001;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO TK001;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO TK001;
GRANT SELECT ON SYS.SINHVIEN TO TK001;
GRANT SELECT ON SYS.NHANVIEN TO TK001;
GRANT SELECT ON SYS.DONVI TO TK001;

GRANT CONNECT TO PK002;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO PK002;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO PK002;
GRANT SELECT ON SYS.SINHVIEN TO PK002;
GRANT SELECT ON SYS.NHANVIEN TO PK002;
GRANT SELECT ON SYS.DONVI TO PK002;

GRANT CONNECT TO TK005;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO TK005;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO TK005;
GRANT SELECT ON SYS.SINHVIEN TO TK005;
GRANT SELECT ON SYS.NHANVIEN TO TK005;
GRANT SELECT ON SYS.DONVI TO TK005;

GRANT CONNECT TO TK008;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO TK008;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO TK008;
GRANT SELECT ON SYS.SINHVIEN TO TK008;
GRANT SELECT ON SYS.NHANVIEN TO TK008;
GRANT SELECT ON SYS.DONVI TO TK008;

--PHÒNG ĐÀO TẠO
CREATE USER TPDT003 IDENTIFIED BY TPDT003_123456;
CREATE USER NVPDT004 IDENTIFIED BY NVPDT004_123456;

GRANT CONNECT TO TPDT003;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO TPDT003;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO TPDT003;
GRANT SELECT, INSERT, UPDATE ON SYS.DANGKY TO TPDT003;
GRANT SELECT, UPDATE ON SYS.SINHVIEN TO TPDT003;

GRANT CONNECT TO NVPDT004;
GRANT SELECT, INSERT, UPDATE ON SYS.MOMON TO NVPDT004;
GRANT SELECT, INSERT, UPDATE ON SYS.HOCPHAN TO NVPDT004;
GRANT SELECT, INSERT, UPDATE ON SYS.DANGKY TO NVPDT004;
GRANT SELECT, UPDATE ON SYS.SINHVIEN TO NVPDT004;

--PHÒNG TÀI VỤ
CREATE USER NVPTV006 IDENTIFIED BY NVPTV006_123456;

GRANT CONNECT TO NVPTV006;
GRANT SELECT, INSERT, UPDATE ON SYS.NHANVIEN TO NVPTV006;
GRANT SELECT, INSERT, UPDATE ON SYS.DONVI TO NVPTV006;

--ADMIN DATABASE
CREATE USER ADMIN IDENTIFIED BY ADMIN_2304;
GRANT DBA TO ADMIN;
GRANT EXECUTE ANY PROCEDURE TO ADMIN;
